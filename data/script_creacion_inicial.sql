USE [GD2C2017]
GO
/****** Object:  User [gd]    Script Date: 04/11/2017 18:35:51 ******/
CREATE USER [gd] FOR LOGIN [gd] WITH DEFAULT_SCHEMA=[dbo]
GO
/****** Object:  Schema [MIRRORING_GUYS]    Script Date: 04/11/2017 18:35:52 ******/
CREATE SCHEMA [MIRRORING_GUYS]
GO
/****** Object:  Table [MIRRORING_GUYS].[Funcionalidad]    Script Date: 04/11/2017 18:35:52 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_PADDING OFF
GO
CREATE TABLE [MIRRORING_GUYS].[Funcionalidad](
	[id] [int] IDENTITY(1,1) NOT NULL,
	[nombre] [varchar](20) NOT NULL,
	[descripcion] [varchar](50) NOT NULL,
 CONSTRAINT [PK_Funcionalidad] PRIMARY KEY CLUSTERED 
(
	[id] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY]

GO
SET ANSI_PADDING OFF
GO
/****** Object:  Table [MIRRORING_GUYS].[FuncPorRol]    Script Date: 04/11/2017 18:35:52 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [MIRRORING_GUYS].[FuncPorRol](
	[id] [int] IDENTITY(1,1) NOT NULL,
	[id_func] [int] NOT NULL,
	[id_rol] [int] NOT NULL,
 CONSTRAINT [PK_FuncPorRol] PRIMARY KEY CLUSTERED 
(
	[id] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY]

GO
/****** Object:  Table [MIRRORING_GUYS].[Rol]    Script Date: 04/11/2017 18:35:52 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_PADDING OFF
GO
CREATE TABLE [MIRRORING_GUYS].[Rol](
	[id] [int] IDENTITY(1,1) NOT NULL,
	[nombre] [varchar](20) NOT NULL,
	[descripcion] [varchar](50) NOT NULL,
 CONSTRAINT [PK_Rol] PRIMARY KEY CLUSTERED 
(
	[id] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY]

GO
SET ANSI_PADDING OFF
GO
/****** Object:  Table [MIRRORING_GUYS].[Usuario]    Script Date: 04/11/2017 18:35:52 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_PADDING ON
GO
CREATE TABLE [MIRRORING_GUYS].[Usuario](
	[id] [int] IDENTITY(1,1) NOT NULL,
	[username] [varchar](20) NOT NULL,
	[password] [char](64) NOT NULL,
 CONSTRAINT [PK_Usuario] PRIMARY KEY CLUSTERED 
(
	[id] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY]

GO
SET ANSI_PADDING OFF
GO
/****** Object:  Table [MIRRORING_GUYS].[UsuarioRol]    Script Date: 04/11/2017 18:35:52 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [MIRRORING_GUYS].[UsuarioRol](
	[id] [int] IDENTITY(1,1) NOT NULL,
	[id_usuario] [int] NOT NULL,
	[id_rol] [int] NOT NULL,
 CONSTRAINT [PK_UsuarioRol] PRIMARY KEY CLUSTERED 
(
	[id] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY]

GO
ALTER TABLE [MIRRORING_GUYS].[FuncPorRol]  WITH CHECK ADD  CONSTRAINT [FK_FuncPorRol_Func] FOREIGN KEY([id_func])
REFERENCES [MIRRORING_GUYS].[Funcionalidad] ([id])
GO
ALTER TABLE [MIRRORING_GUYS].[FuncPorRol] CHECK CONSTRAINT [FK_FuncPorRol_Func]
GO
ALTER TABLE [MIRRORING_GUYS].[FuncPorRol]  WITH CHECK ADD  CONSTRAINT [FK_FuncPorRol_Rol] FOREIGN KEY([id_rol])
REFERENCES [MIRRORING_GUYS].[Rol] ([id])
GO
ALTER TABLE [MIRRORING_GUYS].[FuncPorRol] CHECK CONSTRAINT [FK_FuncPorRol_Rol]
GO
ALTER TABLE [MIRRORING_GUYS].[UsuarioRol]  WITH CHECK ADD  CONSTRAINT [FK_UsuarioRol_Rol] FOREIGN KEY([id_rol])
REFERENCES [MIRRORING_GUYS].[Rol] ([id])
GO
ALTER TABLE [MIRRORING_GUYS].[UsuarioRol] CHECK CONSTRAINT [FK_UsuarioRol_Rol]
GO
ALTER TABLE [MIRRORING_GUYS].[UsuarioRol]  WITH CHECK ADD  CONSTRAINT [FK_UsuarioRol_Usuario] FOREIGN KEY([id_usuario])
REFERENCES [MIRRORING_GUYS].[Usuario] ([id])
GO
ALTER TABLE [MIRRORING_GUYS].[UsuarioRol] CHECK CONSTRAINT [FK_UsuarioRol_Usuario]
GO